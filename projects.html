<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Prerana's Projects</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,500;0,600;0,700;1,500;1,600&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body class="sky projects-page projects-intro-only">
  <header class="site-header">
    <nav class="nav balanced">
      <a class="brand" href="index.html" aria-label="Home"> PG </a>
      <button class="nav-toggle" aria-label="Toggle Menu" aria-expanded="false">☰</button>
      <ul class="nav-links">
        <li><a href="#about" data-scroll>About</a></li>
        <li><a href="projects.html" aria-current="page">Projects</a></li>
        <li><a href="#skills" data-scroll>Skills</a></li>
        <li><a href="assets/resume/prerana-gowda-resume.pdf" download>Resume</a></li>
      </ul>
      <div class="nav-extra" aria-hidden="false">
        <a class="icon-circle" href="https://github.com/prerana-e" target="_blank" rel="noopener" aria-label="GitHub Profile">
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" fill="currentColor">
            <path d="M12 .5C5.65.5.5 5.65.5 12c0 5.1 3.3 9.42 7.9 10.95.58.1.8-.25.8-.56 0-.28-.01-1.02-.02-2-3.22.7-3.9-1.55-3.9-1.55-.53-1.34-1.3-1.7-1.3-1.7-1.06-.72.08-.71.08-.71 1.17.08 1.78 1.2 1.78 1.2 1.04 1.78 2.74 1.27 3.4.97.1-.76.41-1.27.75-1.56-2.57-.29-5.27-1.29-5.27-5.73 0-1.27.46-2.3 1.2-3.11-.12-.29-.52-1.46.11-3.05 0 0 .97-.31 3.18 1.19a11.1 11.1 0 0 1 2.9-.39c.98 0 1.97.13 2.9.39 2.2-1.5 3.17-1.19 3.17-1.19.63 1.59.24 2.76.12 3.05.75.81 1.2 1.84 1.2 3.11 0 4.45-2.7 5.44-5.28 5.72.42.36.8 1.06.8 2.14 0 1.55-.01 2.79-.01 3.17 0 .31.21.67.81.56A10.51 10.51 0 0 0 23.5 12C23.5 5.65 18.35.5 12 .5Z"/>
          </svg>
        </a>
        <a class="icon-circle" href="https://www.linkedin.com/in/prerana-gowda" target="_blank" rel="noopener" aria-label="LinkedIn Profile">
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" fill="currentColor">
            <path d="M4.98 3.5a2.5 2.5 0 1 1 0 5.001 2.5 2.5 0 0 1 0-5ZM3 9h4v12H3V9Zm7.5 0h3.83v1.71h.05c.53-.95 1.82-1.95 3.75-1.95 4.01 0 4.77 2.64 4.77 6.07V21h-4v-5.22c0-1.24-.02-2.83-1.73-2.83-1.73 0-1.99 1.36-1.99 2.73V21h-3.98V9Z"/>
          </svg>
        </a>
        <a class="icon-circle" href="#contact" data-scroll aria-label="Jump to Contact Section">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect x="3" y="5" width="18" height="14" rx="2" ry="2"/><polyline points="3,7 12,13 21,7"/></svg>
        </a>
      </div>
      <div class="scroll-progress" aria-hidden="true"><span></span></div>
    </nav>
  </header>

  <!-- Floating clouds / parallax layers (full set) -->
  <div class="clouds" aria-hidden="true">
    <div class="cloud c1"></div>
    <div class="cloud c2"></div>
    <div class="cloud c3"></div>
    <div class="cloud c4"></div>
    <div class="cloud c5"></div>
  <!-- Additional lighter layer clouds (projects page only) -->
  <div class="cloud c6"></div>
  <div class="cloud c7"></div>
  <div class="cloud c8"></div>
  <div class="cloud c9"></div>
  </div>
  <!-- Starfield for dark theme parity -->
  <canvas id="starfield" class="stars" aria-hidden="true"></canvas>

  <main class="container projects-layout">
    <div class="projects-main">
    <!-- Projects Hero / Intro -->
    <section class="hero minimal projects-hero" id="top" data-reveal>
      <div class="hero-main">
        <h1><span class="hi">Selected & Archived</span><span class="name">Projects</span></h1>
        <p class="tagline">AI‑assisted developer tooling, network automation surfaces, and research experiments with a focus on reliability & crisp operator ergonomics.</p>
        <ul class="metrics compact">
          <li><span class="metric-value" id="metricTotal">0</span><span class="metric-label">Total</span></li>
          <li><span class="metric-value" id="metricAI">0</span><span class="metric-label">AI</span></li>
          <li><span class="metric-value" id="metricDX">0</span><span class="metric-label">DX</span></li>
        </ul>
        <div class="hero-actions">
          <a href="#all" class="btn" data-scroll>Jump to List</a>
          <a href="index.html#contact" class="btn ghost" data-scroll>Get in Touch</a>
        </div>
        <div class="meta-badges minimal-badges">
          <span class="badge">Python</span>
          <span class="badge">TypeScript</span>
          <span class="badge">Angular</span>
          <span class="badge">RL</span>
        </div>
      </div>
    </section>

    <section class="card projects-card" id="all" data-reveal>
      <div class="projects-head">
  <h2 class="sr-only">Project Explorer</h2>
        <div class="projects-controls" role="toolbar" aria-label="Project filters and search">
          <div class="segmented multi" id="filterBar" aria-label="Tag filters">
            <button class="seg-btn active" data-filter="all" aria-pressed="true">All</button>
            <!-- dynamic tag buttons injected -->
          </div>
          <div class="search-wrap">
            <input type="search" id="projSearch" placeholder="Search projects or courses (e.g. cse190)" aria-label="Search projects or course codes" />
            <select id="projSort" aria-label="Sort projects">
              <option value="recent">Sort: Recent</option>
              <option value="az">Title A→Z</option>
              <option value="za">Title Z→A</option>
            </select>
          </div>
        </div>
  <div class="results-line"><span id="resultsCount">0</span> shown <span id="courseFilterChip" class="course-filter-chip" hidden></span></div>
      </div>
  <div class="grid projects-grid" id="projectsGrid">
        <!-- ACM Hack DiamondStaff Board Member -->
  <article id="acm-diamondstaff" class="tile project fade-in tilt" tabindex="0" data-tags="leadership" data-courses="" data-title="ACM Hack DiamondStaff Board Member" data-date="2025-09-01" data-desc="ACM Hack DiamondStaff Board Member (Sept 2025 – Present)<br>• Led workshops on cloud computing, OAuth, backend engineering & iOS dev for 20–40+ attendees.<br>• Organized an industry careers panel with faculty; reviewed technical content for 10+ workshops/quarter (Docker, API integration).<br>• Assisted with DiamondHacks 2025 logistics & mentorship.">
          <figure class="proj-thumb">
            <img src="assets/img/placeholder-thumb.svg" alt="ACM Hack workshop session" class="lazy-img" width="480" height="300" loading="lazy" />
          </figure>
          <header class="proj-header">
            <h3>ACM Hack DiamondStaff Board Member</h3>
            <span class="proj-badge">Role</span>
          </header>
          <p>Workshop leadership & event coordination (cloud, OAuth, backend, iOS).</p>
          <ul class="stack-list"><li>Cloud</li><li>OAuth</li><li>Workshops</li></ul>
        </article>
        <!-- Habitizer Android Productivity App -->
  <article id="habitizer" class="tile project fade-in tilt" tabindex="0" data-tags="mobile" data-courses="CSE 110" data-title="Habitizer" data-date="2025-03-15" data-desc="Habitizer (Jan–Mar 2025) Android productivity app.<br>• Habit tracking with routine customization, timers, goals, pause & real-time elapsed tracking.<br>• Persistence via SQLite; mock timer controls for testing; robust task CRUD (add/delete/reorder/rename).<br>• Ensures seamless UX & state durability across shutdowns/crashes.">
          <figure class="proj-thumb">
            <img src="assets/img/placeholder-thumb.svg" alt="Habitizer Android app interface" class="lazy-img" width="480" height="300" loading="lazy" />
          </figure>
          <header class="proj-header">
            <h3>Habitizer</h3>
            <span class="proj-badge">App</span>
          </header>
          <p>Android habit & routine tracker with resilient timers & SQLite persistence.</p>
          <ul class="stack-list"><li>Java</li><li>Android</li><li>SQLite</li></ul>
        </article>
        <!-- Multi-Agent Traffic Simulation -->
  <article id="multi-agent-traffic" class="tile project fade-in tilt" tabindex="0" data-tags="ai" data-courses="CSE 190 CSE 151A CSE 150B" data-title="Multi-Agent Traffic Simulation" data-date="2025-07-15" data-desc="Multi-agent autonomous vehicle traffic simulator with MARL coordination in Highway-Env.<br>• Studying policy coordination impact on flow & safety (collision, goal completion, lane adherence metrics).<br>• Benchmarking throughput using Waymo Open Dataset: global vs local policy trade-offs.<br>• Training single agents (Behavior Cloning, REINFORCE) then scaling to multi-agent systems.">
          <figure class="proj-thumb">
            <img src="assets/img/placeholder-thumb.svg" alt="Highway multi-agent traffic simulation visualization" class="lazy-img" width="480" height="300" loading="lazy" />
          </figure>
          <header class="proj-header">
            <h3>Multi-Agent Traffic Simulation</h3>
            <span class="proj-badge">Research</span>
          </header>
          <p>MARL autonomous vehicle coordination & throughput analysis in Highway‑Env.</p>
          <ul class="stack-list"><li>Python</li><li>PyTorch</li><li>Gymnasium</li><li>Highway-Env</li></ul>
        </article>
        <!-- Pacman Search & Value Iteration (CSE 190) -->
  <article id="pacman-search-vi" class="tile project fade-in tilt" tabindex="0" data-tags="ai" data-courses="CSE 190" data-title="Pacman Search & Value Iteration" data-date="2025-09-03" data-desc="Implemented classical search + dynamic programming algorithms for UC Berkeley Pacman AI project (CSE 190).<br>• Added DFS, BFS, UCS, A* with consistent graph search (frontier + visited) yielding optimal paths where required.<br>• Engineered Value Iteration Agent over custom Pacman MDP (terminal pellet/ghost states) with configurable discount & iterations.<br>• Achieved 100/100 autograder score (all search + value iteration test suites passing).<br>• Clean separation of problem abstraction (SearchProblem, MDP) from algorithms; priority queue cost/heuristic ordering ensures admissibility.<br><span class='mini muted'>Source based on Berkeley Pacman framework (educational license).</span>">
          <figure class="proj-thumb">
            <img src="assets/img/placeholder-thumb.svg" alt="Pacman grid illustrating search paths" class="lazy-img" width="480" height="300" loading="lazy" />
          </figure>
          <header class="proj-header">
            <h3>Pacman Search & Value Iteration</h3>
            <span class="proj-badge">AI</span>
          </header>
          <p>DFS, BFS, UCS, A*, and Value Iteration for Pacman MDP (100/100 score).</p>
          <ul class="stack-list"><li>Python</li><li>Search</li><li>MDP</li></ul>
        </article>
        <!-- Action Castle & Custom Text Adventure (CSE 190 HW1) -->
  <article id="action-castle-text-adventure" class="tile project fade-in tilt" tabindex="0" data-tags="ai" data-courses="CSE 190" data-title="Action Castle & Text Adventure Engine" data-date="2025-09-02" data-desc="Implemented classic parser-based interactive fiction engine & two games (Action Castle reimplementation + original design).<br>• Extended starter code: locations graph, items, inventory, blocks (locked door, darkness, guard/troll style obstacles) & special actions pipeline.<br>• Added BFS state-space explorer (immutable state tuples, action enumeration) for automatic plan finding and branching factor analytics.<br>• Authored PDDL domain/problem files (navigation, get/drop, fishing, feeding troll, unlocking, delivering rose) + STRIPS planning experiments.<br>• Visualized world graph via GraphViz + instrumented search depth/branch metrics and goal tests (crown worn, throne win state).<br>• Highlights search vs planning abstractions, precondition design, and scalability considerations in text adventure AI.">
          <figure class="proj-thumb">
            <img src="assets/img/placeholder-thumb.svg" alt="Action Castle text adventure graph visualization placeholder" class="lazy-img" width="480" height="300" loading="lazy" />
          </figure>
          <header class="proj-header">
            <h3>Action Castle & Text Adventure Engine</h3>
            <span class="proj-badge">AI</span>
          </header>
          <p>Interactive fiction engine + BFS & PDDL planning (Action Castle + original game).</p>
          <ul class="stack-list"><li>Python</li><li>BFS</li><li>PDDL</li><li>GraphViz</li></ul>
        </article>
        <!-- Mausritter AI Game Master (CSE 190 HW3) -->
  <article id="mausritter-gm" class="tile project fade-in tilt" tabindex="0" data-tags="ai" data-courses="CSE 190" data-title="Mausritter AI Game Master" data-date="2025-09-04" data-desc="Built an AI Game Master for Mausritter TTRPG using Kani function-calling framework (CSE 190 HW3).<br>• Implemented dice rolling (d20 lib), structured character creation (Mouse dataclass) & save mechanics (adv / disadv).<br>• Exposed typed Python tools (@ai_function) for rolling, mouse generation & stat-based checks; GPT-4 orchestrates narrative + calls.<br>• Added image generation prompt pipeline (DALL·E 3) for character portrait and structured vs unstructured GM comparison experiment.<br>• Demonstrates LLM tool-use, stateful agent design & separation of narrative vs rules logic.">
          <figure class="proj-thumb">
            <img src="assets/img/placeholder-thumb.svg" alt="Mausritter AI Game Master interaction screenshot placeholder" class="lazy-img" width="480" height="300" loading="lazy" />
          </figure>
          <header class="proj-header">
            <h3>Mausritter AI Game Master</h3>
            <span class="proj-badge">AI</span>
          </header>
          <p>Kani-based LLM GM: character creation, dice saves, narrative tool calling.</p>
          <ul class="stack-list"><li>Python</li><li>Kani</li><li>OpenAI</li></ul>
        </article>
        <!-- TextWorld RL Agents (CSE 190 HW2) -->
  <article id="textworld-rl" class="tile project fade-in tilt" tabindex="0" data-tags="ai" data-courses="CSE 190" data-title="TextWorld RL Agents" data-date="2025-09-04" data-desc="Implemented tabular Q-Learning & Deep Q-Network agents for TextWorld-Express interactive fiction tasks (coin & mapreader).<br>• Engineered state parsing (observation + inventory) + epsilon-greedy policy with episodic returns tracking.<br>• Extended to DQN: RNN (GRU) state encoder + experience replay + target network sync & epsilon decay.<br>• Evaluated robustness across stochastic action noise (25%) & punishment environments (illegal action penalties).<br>• Highlights sample efficiency trade-offs, stability via target network, and text state representation constraints.">
          <figure class="proj-thumb">
            <img src="assets/img/placeholder-thumb.svg" alt="TextWorld RL agent architecture diagram placeholder" class="lazy-img" width="480" height="300" loading="lazy" />
          </figure>
          <header class="proj-header">
            <h3>TextWorld RL Agents</h3>
            <span class="proj-badge">RL</span>
          </header>
          <p>Tabular Q-Learning & DQN for TextWorld-Express (coin & mapreader).</p>
          <ul class="stack-list"><li>Python</li><li>RL</li><li>PyTorch</li></ul>
        </article>
        <!-- PunchLines Hackathon Project -->
  <article id="punchlines" class="tile project fade-in tilt" tabindex="0" data-tags="ai" data-courses="CSE 110" data-title="PunchLines" data-date="2025-02-02" data-desc="Full-stack AI debate training platform (UCLA Hackathon).<br>• Roblox 3D experience + React/Tailwind web UI with dual AI agents for real-time feedback.<br>• Gemini API prompt-engineered evaluation of user arguments and rebuttals.<br>• Interactive hooks-driven components, animated feedback, scalable component system.">
          <figure class="proj-thumb">
            <img src="assets/img/placeholder-thumb.svg" alt="PunchLines AI debate training platform UI" class="lazy-img" width="480" height="300" loading="lazy" />
          </figure>
          <header class="proj-header">
            <h3>PunchLines</h3>
            <span class="proj-badge">Hackathon</span>
          </header>
          <p>AI debate training platform combining Roblox world + React UI + Gemini analysis.</p>
          <ul class="stack-list"><li>React</li><li>Gemini</li><li>Roblox</li><li>Tailwind</li></ul>
        </article>
        <!-- Multimodal Recognition Systems -->
  <article id="multimodal-recognition" class="tile project fade-in tilt" tabindex="0" data-tags="ai" data-courses="CSE 151A CSE 150B" data-title="Multimodal Recognition Systems" data-date="2024-11-20" data-desc="Suite of high-performance recognition systems (audio • face • semantic image).<br>• Audio: NFFT-4096 spectrogram fingerprinting & fanout matching (sub-100ms, O(log N) across 1K+ DB).<br>• Face: MTCNN + InceptionResnetV1 embeddings (>95% accuracy) + large-scale clustering (Whispers).<br>• Image: 512-D ResNet-18 + 200-D GloVe margin ranking network (85% semantic query accuracy).">
          <figure class="proj-thumb">
            <img src="assets/img/placeholder-thumb.svg" alt="Visualization of multimodal recognition components" class="lazy-img" width="480" height="300" loading="lazy" />
          </figure>
          <header class="proj-header">
            <h3>Multimodal Recognition Systems</h3>
            <span class="proj-badge">AI</span>
          </header>
          <p>Audio, face & semantic image retrieval pipelines with optimized embeddings.</p>
          <ul class="stack-list"><li>PyTorch</li><li>Whisper</li><li>ResNet</li><li>MTCNN</li></ul>
        </article>
      </div>
    </section>
    </div>
    <aside class="card courses-card" id="courses" data-reveal aria-labelledby="coursesTitle">
      <h2 id="coursesTitle">Course Timeline</h2>
      <p class="mini muted">Core university coursework (recent → older). <span class="gpa-badge" aria-label="Cumulative GPA 3.8">GPA 3.8</span></p>
      <ol class="course-timeline" id="courseTimeline" aria-label="Course timeline"></ol>
    </aside>
  </main>

  <footer class="site-footer">
    <p>© 2025 Prerana Gowda • <a href="rss.xml">RSS</a></p>
  </footer>

  <script src="script.js"></script>
  <script>
    (function(){
      // Title-only initial state reveal handler
      const body=document.body;
      function triggerReveal(){
        if(!body.classList.contains('projects-intro-only')) return;
        body.classList.remove('projects-intro-only');
        body.classList.add('projects-loaded');
      }
      ['scroll','wheel','touchstart'].forEach(evt=>window.addEventListener(evt,triggerReveal,{once:true,passive:true}));
      window.addEventListener('keydown',e=>{
        if(['ArrowDown','PageDown','Space','Enter','Tab'].includes(e.code||e.key)) triggerReveal();
      },{once:true});
      setTimeout(triggerReveal,7000);
      const filterBar=document.getElementById('filterBar');
      const search=document.getElementById('projSearch');
      const sort=document.getElementById('projSort');
      const results=document.getElementById('resultsCount');
      const grid=document.getElementById('projectsGrid');
      const cards=[...grid.querySelectorAll('.project')];
      cards.forEach((c,i)=>c.style.setProperty('--i',i));
      const tagSet=new Set();
      cards.forEach(c=> (c.dataset.tags||'').split(/\s+/).forEach(t=>t&&tagSet.add(t)) );
      [...tagSet].sort().forEach(tag=>{
        const btn=document.createElement('button');
        btn.className='seg-btn';
        btn.type='button';
        btn.dataset.filter=tag;
        btn.setAttribute('aria-pressed','false');
        btn.textContent=tag;
        filterBar.appendChild(btn);
      });
      const activeTags=new Set(); // empty => all
      let activeCourse=""; // course code filter (e.g., 'CSE 110')
      const courseChip=document.getElementById('courseFilterChip');
      function updateCourseChip(){
        if(!activeCourse){ courseChip.hidden=true; courseChip.textContent=""; return; }
        courseChip.hidden=false;
        courseChip.innerHTML=`<span class="cf-label">${activeCourse}</span><button type="button" aria-label="Remove course filter" class="cf-x">×</button>`;
      }
      function apply(){
        const q=(search.value||'').toLowerCase();
        let visible=0, ai=0, dx=0;
        cards.forEach(card=>{
          const tags=(card.dataset.tags||'').split(/\s+/);
          const rawCourses = card.dataset.courses||'';
          // Extract full course codes like 'CSE 190', 'CSE 151A' etc.
          const courseCodes = rawCourses.match(/[A-Za-z]{2,}\s*\d+[A-Za-z]?/g) || [];
          const title=card.dataset.title.toLowerCase();
          const matchesTags=activeTags.size===0 || [...activeTags].every(t=>tags.includes(t));
          let matchesSearch=true;
          if(q){
            const qNorm=q.replace(/[^a-z0-9]/g,'');
            const titleMatch=title.includes(q);
            const courseMatch=courseCodes.some(c=>{
              const cNorm=c.toLowerCase().replace(/[^a-z0-9]/g,'');
              return cNorm.includes(qNorm) || qNorm.includes(cNorm);
            });
            matchesSearch=titleMatch || courseMatch;
          }
          const matchesCourse=!activeCourse || courseCodes.some(c=>c.toLowerCase().replace(/\s+/g,'')===activeCourse.toLowerCase().replace(/\s+/g,''));
          const show=matchesTags && matchesSearch && matchesCourse;
          card.classList.toggle('hidden-card', !show);
          if(show){
            visible++;
            if(tags.includes('ai')) ai++;
            if(tags.includes('dx')) dx++;
          }
        });
        results.textContent=visible;
        const mt=document.getElementById('metricTotal'); if(mt) mt.textContent=cards.length;
        const mai=document.getElementById('metricAI'); if(mai) mai.textContent=ai;
        const mdx=document.getElementById('metricDX'); if(mdx) mdx.textContent=dx;
        updateCourseChip();
      }
      filterBar.addEventListener('click',e=>{
        const btn=e.target.closest('.seg-btn'); if(!btn) return;
        const tag=btn.dataset.filter;
        if(tag==='all'){
          activeTags.clear();
          filterBar.querySelectorAll('.seg-btn').forEach(b=>{if(b.dataset.filter!=='all') b.classList.remove('active'); b.setAttribute('aria-pressed', b.dataset.filter==='all');});
          filterBar.querySelector('.seg-btn[data-filter="all"]').classList.add('active');
          apply();
          return;
        }
        if(activeTags.has(tag)){ activeTags.delete(tag); btn.classList.remove('active'); btn.setAttribute('aria-pressed','false'); }
        else { activeTags.add(tag); btn.classList.add('active'); btn.setAttribute('aria-pressed','true'); }
        const allBtn=filterBar.querySelector('.seg-btn[data-filter="all"]');
        if(activeTags.size===0){ allBtn.classList.add('active'); allBtn.setAttribute('aria-pressed','true'); }
        else { allBtn.classList.remove('active'); allBtn.setAttribute('aria-pressed','false'); }
        apply();
      });
      search.addEventListener('input',apply);
      sort.addEventListener('change',()=>{
        if(sort.value==='recent'){ cards.sort((a,b)=> new Date(b.dataset.date)-new Date(a.dataset.date)); }
        else if(sort.value==='az'){ cards.sort((a,b)=> a.dataset.title.localeCompare(b.dataset.title)); }
        else if(sort.value==='za'){ cards.sort((a,b)=> b.dataset.title.localeCompare(a.dataset.title)); }
        cards.forEach(c=>grid.appendChild(c));
      });
      // Course tag click filtering (delegate on course timeline)
      document.addEventListener('click',e=>{
        const tagEl=e.target.closest('.course-tag');
        if(tagEl){
          const cc=tagEl.textContent.trim();
          // Normalize: ensure single space between letters prefix and number
          const norm=cc.replace(/([A-Za-z]{2,})(\s*)(\d+)/,(m,a,sp,b)=>`${a.toUpperCase()} ${b}`);
          if(norm===activeCourse) activeCourse=""; else activeCourse=norm;
          apply();
          flashCourseMatches(norm);
        }
        const courseTitleEl=e.target.closest('.course-title');
        if(courseTitleEl){
          const raw=courseTitleEl.textContent.split('•')[0].trim();
          const norm=raw.replace(/([A-Za-z]{2,})(\s*)(\d+[A-Za-z]?)/,(m,a,sp,b)=>`${a.toUpperCase()} ${b}`);
          if(norm===activeCourse) activeCourse=""; else activeCourse=norm;
          apply();
          document.getElementById('all')?.scrollIntoView({behavior:'smooth'});
          flashCourseMatches(norm);
        }
        if(e.target.classList?.contains('cf-x')){ activeCourse=""; apply(); }
      });
      function flashCourseMatches(code){
        const norm=code.toLowerCase().replace(/\s+/g,'');
        requestAnimationFrame(()=>{
          cards.forEach(card=>{
            if(card.classList.contains('hidden-card')) return;
            const dc=(card.dataset.courses||'').toLowerCase().replace(/\s+/g,'');
            if(dc.includes(norm)){
              card.classList.add('course-match-flash');
              setTimeout(()=>card.classList.remove('course-match-flash'),1600);
            }
          });
        });
      }
      const overlay=document.createElement('div'); overlay.className='proj-modal-overlay'; overlay.innerHTML='<div class="proj-modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle"><button class="close-modal" aria-label="Close">×</button><div class="modal-content"></div></div>';
      document.body.appendChild(overlay);
      const closeBtn=overlay.querySelector('.close-modal');
      const content=overlay.querySelector('.modal-content');
      function open(card){
        const title=card.querySelector('h3').textContent;
        const desc=card.dataset.desc || card.querySelector('p').textContent;
        const stack=[...card.querySelectorAll('.stack-list li')].map(li=>li.textContent).join(', ');
        content.innerHTML=`<h3 id="modalTitle">${title}</h3><p>${desc}</p><p><strong>Stack:</strong> ${stack}</p><p class="modal-links"><a href="#${card.id}" class="deep-link">Permalink</a></p>`;
        overlay.classList.add('open');
        closeBtn.focus();
      }
      function close(){ overlay.classList.remove('open'); }
      grid.addEventListener('click',e=>{const card=e.target.closest('.project'); if(card) open(card);});
      grid.addEventListener('keydown',e=>{ if(e.key==='Enter'){ const card=e.target.closest('.project'); if(card){ open(card); e.preventDefault(); } } });
      overlay.addEventListener('click',e=>{ if(e.target===overlay) close(); });
      closeBtn.addEventListener('click',close);
      window.addEventListener('keydown',e=>{ if(e.key==='Escape' && overlay.classList.contains('open')) close(); });
      grid.addEventListener('keydown',e=>{
        if(!['ArrowRight','ArrowLeft','ArrowDown','ArrowUp'].includes(e.key)) return;
        const focusable=cards.filter(c=>!c.classList.contains('hidden-card'));
        const idx=focusable.indexOf(document.activeElement);
        if(idx>-1){
          e.preventDefault();
          let nextIdx=idx;
          if(e.key==='ArrowRight' || e.key==='ArrowDown') nextIdx=Math.min(focusable.length-1, idx+1); else nextIdx=Math.max(0, idx-1);
          focusable[nextIdx].focus();
        }
      });
      sort.value='recent';
      sort.dispatchEvent(new Event('change'));
      apply();
      // Course timeline data & render
      const courseData=[
        // Most recent / upcoming (planned or in-progress, grades pending)
        { code:'CSE 120', title:'Operating Systems Principles', term:'Fall 2025', area:['systems'], planned:true },
        { code:'CSE 132A', title:'Database System Principles', term:'Fall 2025', area:['databases'], planned:true },
        { code:'CSE 158R', title:'Recommender Systems & Web Mining', term:'Fall 2025', area:['ml','data'], planned:true },
        { code:'CSE 167', title:'Computer Graphics', term:'Fall 2025', area:['graphics'], planned:true },
        // Completed 2025
        { code:'CSE 150B', title:'AI: Search and Reasoning', term:'Spring 2025', grade:'A', area:['ai','search'] },
        { code:'CSE 151A', title:'ML: Learning Algorithms', term:'Spring 2025', grade:'A-', area:['ml','ai'] },
        { code:'CSE 190', title:'Deep Reinforcement Learning (Topics)', term:'Spring 2025', grade:'A', area:['ml','ai','rl'] },
        { code:'CSE 101', title:'Design & Analysis of Algorithms', term:'Winter 2025', grade:'B+', area:['algorithms','core'] },
        { code:'CSE 105', title:'Theory of Computation', term:'Winter 2025', grade:'A-', area:['theory'] },
        { code:'CSE 110', title:'Software Engineering', term:'Winter 2025', grade:'A-', area:['software','team'] },
        { code:'MATH 183', title:'Statistical Methods', term:'Winter 2025', grade:'A', area:['math','stats'] },
        // 2024
        { code:'CSE 29', title:'Systems Programming & Software Tools', term:'Fall 2024', grade:'A+', area:['systems','tools'] },
        { code:'CSE 100', title:'Advanced Data Structures', term:'Fall 2024', grade:'A-', area:['algorithms','core'] },
        { code:'SOCI 153', title:'Urban Sociology', term:'Fall 2024', grade:'A-', area:['ge','humanities'] },
        { code:'CSE 21', title:'Mathematics for Algorithms & Systems Analysis', term:'Summer II 2024', grade:'A+', area:['math','foundations'] },
      ];
      const timelineEl=document.getElementById('courseTimeline');
      if(timelineEl){
        // Group by term preserving order of appearance
        const groups=[]; const map=new Map();
        courseData.forEach(item=>{ if(!map.has(item.term)){ map.set(item.term,[]); groups.push(item.term);} map.get(item.term).push(item); });
        let idx=0;
        groups.forEach(term=>{
          const gLi=document.createElement('li');
          gLi.className='course-group';
          gLi.innerHTML=`<span class="course-term-label">${term}</span>`;
          timelineEl.appendChild(gLi);
          map.get(term).forEach(c=>{
            const li=document.createElement('li');
            if(c.planned) li.classList.add('planned');
            li.dataset.course=c.code;
            li.style.setProperty('--i', idx++);
            li.innerHTML=`<div class="course-head"><span class="course-title">${c.code} • ${c.title}</span><span class="course-term">${c.term}</span></div>`;
            if(c.area?.length){
              const tags=document.createElement('div');
              tags.className='course-tags';
              c.area.forEach(tag=>{
                const span=document.createElement('span');
                span.className='course-tag';
                span.dataset.tag=tag;
                span.textContent=tag;
                tags.appendChild(span);
              });
              li.appendChild(tags);
            }
            timelineEl.appendChild(li);
          });
        });
        // Scroll reveal for course items (excluding group headers)
        const courseItems=[...timelineEl.querySelectorAll('li:not(.course-group)')];
  const io=new IntersectionObserver(entries=>{
          entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('in'); io.unobserve(e.target);} });
  },{rootMargin:'0px 0px -10% 0px', threshold:0});
        courseItems.forEach(ci=>io.observe(ci));
        // Progress fill variable update
        function updateCourseProgress(){
          const rect=timelineEl.getBoundingClientRect();
          const vh=window.innerHeight || document.documentElement.clientHeight;
            const total=rect.height;
            const entered=Math.min(Math.max(vh - Math.max(rect.top,0),0), total);
            const pct= total ? (entered/total)*100 : 0;
            timelineEl.style.setProperty('--ct-progress', pct.toFixed(2));
        }
        ['scroll','resize'].forEach(ev=>window.addEventListener(ev,()=>requestAnimationFrame(updateCourseProgress),{passive:true}));
        updateCourseProgress();
      }
    })();
  </script>
</body>
</html>